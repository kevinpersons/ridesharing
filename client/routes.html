<template name="routes">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-6 col-sm-offset-6 col-md-6 col-md-offset-6 sidebar">
        <h1 class="page-header">Existing Routes</h1>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Location Name</th>
                <th>EST distance</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Stop n Shop</td>
                <td>3 mi</td>
                <td>3 min</td>
              </tr>
              <tr>
                <td>Albany</td>
                <td>50 mi</td>
                <td>60 min</td>
              </tr>
              <tr>
                <td>Mt. Greylock</td>
                <td>4 mi</td>
                <td>10 min</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="floating-panel">
          <b>Start: </b>
          <select id="start" onchange="calcRoute();">
            <option value="williams college, williamstown, ma">Williams</option>
          </select>
          <b>End: </b>
          <select id="end" onchange="calcRoute();">
            <option value="119 Spring St, New York, NY 10012">-</option>
            <option value="876 State rd, north adams, ma">Stop and Shop</option>
            <option value="albany, ny">Albany</option>
            <option value="joplin, mo">Joplin, MO</option>
            <option value="oklahoma city, ok">Oklahoma City</option>
          </select>
        </div>
          <div id="map" class="center"></div>
          <script>
          function initMap() {
              var directionsService = new google.maps.DirectionsService;
              var directionsDisplay = new google.maps.DirectionsRenderer;
              var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 15,
                center: {lat: 42.713782, lng: -73.205057}
              });
              directionsDisplay.setMap(map);

              var onChangeHandler = function() {
                calculateAndDisplayRoute(directionsService, directionsDisplay);
              };
              document.getElementById('start').addEventListener('change', onChangeHandler);
              document.getElementById('end').addEventListener('change', onChangeHandler);
            }

          function calculateAndDisplayRoute(directionsService, directionsDisplay) {
            directionsService.route({
              origin: document.getElementById('start').value,
              destination: document.getElementById('end').value,
              travelMode: google.maps.TravelMode.DRIVING
            }, function(response, status) {
              if (status === google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
              } else {
                window.alert('Directions request failed due to ' + status);
              }
            });
}
          </script>
          <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
          async defer></script>
      </div>
    </div>
  </div>
</template>
